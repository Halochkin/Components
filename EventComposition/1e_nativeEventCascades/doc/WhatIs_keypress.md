# WhatIs: `keypress` ?

The `keypress` event is fired when a key is pressed down, if and only if that key normally _produces a character value_. The `keypress` event type is device dependent and relies on the capabilities of the input devices and how they are mapped in the operating system.    
                         
It generates after the key mapping. It is not be fired when using an input method editor.                 
If `keypress` event is canceled, it should prevent the `input` event from firing, in addition to canceling the default action.

The `keypress` event dispatch _after_ the `keydown` event and _before_ the `keyup` event associated with the same key.
The `keypress` event dispatched _after_ the `beforeinput` event and _before_ the `input` event associated with the same key.

### 1. Not all keyboard keys produce keypress. Which? Why? Why not?

To answer this question we need to figure out with `keypress` event.

keypress` event are similar to `keydown` event but are bit different. The `keydown` event occurs when the key is pressed, followed immediately by the `keypress` event. Then the `keyup` event is generated when the key is released.
 To understand the difference between `keydown` and `keypress`, it is useful to distinguish between `characters` and `keys`. 
 
 A `key` is a physical button on the computer's keyboard. A `character` is a symbol typed by pressing a button. On a US keyboard, hitting the `4` key while holding down the `Shift` key typically produces a `$` character.
 In addition to all the normal keys used to input ASCII characters, keyboards typically have many special purpose keys that do other things. These do not necessarily generate the same events as normal keys, and they show less consistency across browsers.
 
The `keydown` event represent keys being pressed, while the `keypress` event represents a _character being typed_.

 `Modifier keys` are one class of special keys. They include keys like `Shift`, `Control`, `Caps Lock` and `Alt`, that don't send characters, but modify the characters sent by other keys. For nearly all modern browsers. `keydown` event are triggered by modifier keys, but `keypress` event are not. This is consistent with their being "key" events not "character" events. This is consistent with their being `key` events not `character` events.
 
### 2. Many "writing" or editing activities do not fit keypress mold. Such cut n paste. Or deleting a whole word. Or moving using arrow keys.

 There are many special keys on a typical keyboard that do not normally send characters. These include the four arrow keys, navigation keys like `Home` and `Page Up`, special function keys like `Insert` and `Delete`, and the function keys `F1` through `F12`.

### 3. Which usecases do keypress support?
The keypress event is the traditional method for capturing key events and processing them before the DOM is updated with the effects of the key press. It associated with detecting a character value rather than a physical key, and might not be available on all keys in some configurations.

The traditional method to distinguish special keys from normal keys on keypress events is to first check `event.which`. If it is undefined or non-zero, then the event is from a normal key, and the ASCII code for that key is in event.keyCode. If it is defined as zero, the the event is from a special key, and the keycode is in `event.keyCode`.


### 4. And, what are all the different properties on the keydown and keypress events? What are their code and key and other values?

When you catch a keyboard event, you may wish to know which key was pressed.

The `keydown` event should return a code identifying a key, _not a code identifying a character_. It is not obvious how to do this. ASCII codes don't really suffice, since the same key can generate different characters (if combined with shift or control), and the same character can be generated by different keys (such as the numbers on the keyboard and the numbers on the keypad).  Three different properties of the event object may be used to return them. They are:

1. `.key` - returns the key value of the key represented by the event;
2. `.code` -	returns the code of the key that triggered the event;
3. `.which` - returns the Unicode character code of the key that triggered the onkeypress event, or the Unicode key code of the key that triggered the onkeydown or onkeyup event;
4. `.keyCode` - returns the Unicode character code of the key that triggered the onkeypress event, or the Unicode key code of the key that triggered the onkeydown or onkeyup event;
5. `.charCode` -	returns the Unicode character code of the key that triggered the event.


### 5. Which of these properties are supported by all, and which are only supported by a few?
For keypress events, it is pretty clear that the ASCII code of the typed character should be returned, and pretty much all browsers do that.
But what if there is no ASCII code associated with the key? Arrow keys and keys like Page Down and F1 don't have ASCII codes. We call these "special" keys in contrast to the "normal" keys that have ASCII codes. Note that Esc, Backspace, Enter, and Tab are "normal" because they have ASCII codes.

When keypress events are generated for special keys, the browser needs to return some non-ASCII value to indicate which key ways pressed.  

So the main practical importance of this is that `keypress` handlers should not treat event.keyCode as an ASCII code if either event.which or `.charCode` is defined as `0`. 

```javascript
     window.addEventListener("keydown", e => console.log(e.type, e.key, e.code, e.keyCode, e.charCode, e.which));  // keydown e KeyE 69 0 69
     window.addEventListener("keypress", e => console.log(e.type, e.key, e.code, e.keyCode, e.charCode, e.which)); // keypress e KeyE 101 101 101
   ```

> keypress pseudo-ASCII keycodes (which are represented in `.key`, `.keyCode`, `.charCode` and `.which` event properties) are different from `keydown` event, but for non NumPad 0-9 and Enter keys they are the same.


```javascript
     window.addEventListener("keydown", e => console.log(e.type, e.key, e.code, e.keyCode, e.charCode, e.which));  // keydown 2 Digit2 50 0 50
      window.addEventListener("keypress", e => console.log(e.type, e.key, e.code, e.keyCode, e.charCode, e.which)); // keypress 2 Digit2 50 50 50
>
```

### References

[MDN: keypress event](https://developer.mozilla.org/en-US/docs/Web/API/Document/keypress_event);
[MDN: keydown event](https://developer.mozilla.org/en-US/docs/Web/API/Document/keydown_event);
[JavaScript Madness: Keyboard Events](https://unixpapa.com/js/key.html).
