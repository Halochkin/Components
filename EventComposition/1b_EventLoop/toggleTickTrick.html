<div id="context">
    <div id="element-1">
        <div id="element-1.1"></div>
        <div id="element-1.2"></div>
    </div>
    <div id="element-2">
        <div id="element-2.1"></div>
    </div>
</div>
<p>
    Selected elements ids :
    <span id="results"></span>
</p>
<style>
    :scope {
        color: lime;
    }
</style>

<script>


  class myItem extends HTMLElement {
    constructor() {
      super();
      this.attachShadow({mode: "open"});
      this.shadowRoot.innerHTML = `<p>I am from a Shadow DOM</p>`
    }
  }

  customElements.define("my-element", myItem);


  function toggleTick(cb) {
    const details = document.createElement("details");
    details.style.display = "none"; //just in case someone triggers layout via script
    details.ontoggle = cb();
    document.body.appendChild(details);
    //1. microtask1 adds the MutationObserver task which will queue toggle iff
    //   a. details.isConnected === true and
    //   b. details.open has changed
    details.open = true;
    //2. microtask2 disconnects the details element *after* microtask1
    Promise.resolve().then(details.remove.bind(details));
  }

  toggleTick(function () {
    console.log("two");
  });
  console.log("one");
  //one
  //two

</script>



