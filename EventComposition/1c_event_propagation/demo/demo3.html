<div id="outer">
    <h1 id="inner">Click on me!</h1>
</div>
<script src="UnderlyingEventPropagationFunction.js"></script>

<script>
  function log(e, c) {
    console.log(e.type + " on #" + e.currentTarget.id);
  }

  const inner = document.querySelector("#inner");
  const outer = document.querySelector("#outer");

  //two log functions will be added, as the second log is a different function object
  inner.addEventListener("click", log);
  inner.addEventListener("click", log);
  inner.addEventListener("click", log.bind({}));  //log.bind({}) creates a new function object instance

  //only one log will be added,
  //the only option the addEventListener distinguishes is the boolean capture equivalent
  outer.addEventListener("click", log);
  outer.addEventListener("click", log, false);
  outer.addEventListener("click", log, {capture: false});
  outer.addEventListener("click", log, {capture: false, passive: false});

  //only one log on outer capture phase will be added
  outer.addEventListener("click", log, true);
  outer.addEventListener("click", log, {capture: true});
  //but then this log function is removed too, even though the options don't match on
  //other properties than capture
  outer.removeEventListener("click", log, {capture: true, passive: true});

  inner.dispatchEvent(new MouseEvent("click", {bubbles: true}));
  dispatchEventSync(inner, (new MouseEvent("click", {bubbles: true})));
  dispatchEventAsync(inner, (new MouseEvent("click", {bubbles: true})));
</script>