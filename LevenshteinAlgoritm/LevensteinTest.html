<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<script type="module">
  import {levenshtein} from "./levyLifting.js";
  import {unify, convert} from "./levyUnify.js";

  const tests2 = [
    // ["aaazced", "abcdef", [["R", 1, "aaz", 1], ['D', 5, "d"], ['S', 6, "d"]]],
    // ["abcdef", "aaazced", [["R", 1, "b", 3], ['I', 3, "d"], ['S', 5, "f"]]],
    // ["asab", "saab", [['I', 0, "a"], ['D', 3, "a"]]],
    // ["saab", "asab", [['D', 0, "a"], ['I', 2, "a"]]],
    // ["abcabcdef", "abcdef", [['I', 3, "abc"]]],
    // ["abcdef", "abcabcdef", [['D', 3, "abc"]]],
    // ["ab", "abab", [["D", 2, "ab"]]],
    // ["3a3a", "a", [['I', 0, "3a3"]]],
    // ["favorite", "fervourite", [["R", 1, "a", 2], ["D", 4, "u"]]],
    // ["fervourite", "favorite", [["R", 1, "er", 1], ["I", 5, "u"]]],
    ["English is my favorite subject at school. English is my favorite subject at school. English is my favorite subject at school. English is my favorite subject at school. English is my favorite subject at school. English is my favorite subject at school. English is my favorite subject at school. English is my favorite subject at school. English is my favorite subject at school. English is my favorite subject at school.", "Inglesh iz my fervourite sabject at skool. Inglesh iz my fervourite sabject at skool. Inglesh iz my fervourite sabject at skool. Inglesh iz my fervourite sabject at skool. Inglesh iz my fervourite sabject at skool. Inglesh iz my fervourite sabject at skool. Inglesh iz my fervourite sabject at skool. Inglesh iz my fervourite sabject at skool. Inglesh iz my fervourite sabject at skool. Inglesh iz my fervourite sabject at skool.",
      [

        ["S", 0, "E"],
        ["S", 4, "i"],
        ["S", 9, "s"],
        ["R", 15, "a", 2],
        ["D", 18, "u"],
        ["S", 24, "u"],
        ["R", 35, "ch", 1],
        ["S", 42, "E"],
        ["S", 46, "i"],
        ["S", 51, "s"],
        ["R", 57, "a", 2],
        ["D", 60, "u"],
        ["S", 66, "u"],
        ["R", 77, "ch", 1],
        ["S", 84, "E"],
        ["S", 88, "i"],
        ["S", 93, "s"],
        ["R", 99, "a", 2],
        ["D", 102, "u"],
        ["S", 108, "u"],
        ["R", 119, "ch", 1],
        ["S", 126, "E"],
        ["S", 130, "i"],
        ["S", 135, "s"],
        ["R", 141, "a", 2],
        ["D", 144, "u"],
        ["S", 150, "u"],
        ["R", 161, "ch", 1],
        ["S", 168, "E"],
        ["S", 172, "i"],
        ["S", 177, "s"],
        ["R", 183, "a", 2],
        ["D", 186, "u"],
        ["S", 192, "u"],
        ["R", 203, "ch", 1],
        ["S", 210, "E"],
        ["S", 214, "i"],
        ["S", 219, "s"],
        ["R", 225, "a", 2],
        ["D", 228, "u"],
        ["S", 234, "u"],
        ["R", 245, "ch", 1],
        ["S", 252, "E"],
        ["S", 256, "i"],
        ["S", 261, "s"],
        ["R", 267, "a", 2],
        ["D", 270, "u"],
        ["S", 276, "u"],
        ["R", 287, "ch", 1],
        ["S", 294, "E"],
        ["S", 298, "i"],
        ["S", 303, "s"],
        ["R", 309, "a", 2],
        ["D", 312, "u"],
        ["S", 318, "u"],
        ["R", 329, "ch", 1],
        ["S", 336, "E"],
        ["S", 340, "i"],
        ["S", 345, "s"],
        ["R", 351, "a", 2],
        ["D", 354, "u"],
        ["S", 360, "u"],
        ["R", 371, "ch", 1],
        ["S", 378, "E"],
        ["S", 382, "i"],
        ["S", 387, "s"],
        ["R", 393, "a", 2],
        ["D", 396, "u"],
        ["S", 402, "u"],
        ["R", 413, "ch", 1],
      ]
    ]
  ]

  // abcd---efghijk---opq---rstuv---wxyz
  // bcd---eefh1j---ooq---rrsu2---wxy

  // abcd---efghijk---opq---rstuv---wxyz
  // aabcd---eefh1j---ooq---rrsu2---wxyzz

  // abcd---efghijk---opq---rstuv---wxyz
  // 3a3abcd---eefh1j---ooq---rrsu2---wxy4z4z


  for (let [end, begin, expectedResult] of tests2) {


    let start = performance.now();


    // console.time("performance");
    const ops = levenshtein(end, begin);
    const opsString = unify(ops);
    const reA = convert(begin, opsString);
    const strMatches = end === reA;
    opsString.forEach(ar => ar.length === 4 && ar[0] !== 'R' && ar.pop());
    const arrayMatches = JSON.stringify(opsString) === JSON.stringify(expectedResult);
    //check for matching operation arrays
    console.log(performance.now() - start, end);
    // console.timeEnd("performance");
    if (strMatches && arrayMatches)
      continue;
    console.log(JSON.stringify(opsString));
    console.log(end, begin, reA, strMatches, arrayMatches);
    console.table(opsString);

  }
  //todo test with bigger texts and test performance. How big are the strings when things get heavy??
</script>
</body>
</html>