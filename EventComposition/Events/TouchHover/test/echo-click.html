<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Echo-click</title>
</head>
<body>
<h1>hello <a href="#oOo__ps">world</a></h1>
<p>
    To test this out, you can comment out all the three torpedo listeners.
    Only then will you get the composed h1-click event.
</p>

<script>
  document.querySelector("h1").addEventListener("click", function (e) {
    e.stopImmediatePropagation();
    alert("StopPropagationTorpedo 1");
  });
</script>

<script>
  function clickEcho(e) {
    e.target.dispatchEvent(new CustomEvent("click-echo", {composed: true, bubbles: true}));
  }

  document.querySelector("h1").addEventListener("click", clickEcho);

  window.addEventListener("h1-click", function (e) {
    alert("h1-click");
  }, true);
</script>

<script>
  document.querySelector("a").addEventListener("click", function (e) {
    e.stopPropagation();
    alert("StopPropagationTorpedo 2");
  });
</script>

<script>
  window.addEventListener("click", function (e) {
    e.stopPropagation();
    alert("StopPropagationTorpedo 3");
  }, true);
</script>
</body>
</html>