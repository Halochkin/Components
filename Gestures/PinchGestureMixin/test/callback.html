<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <style type="text/css" rel="stylesheet">

        scale-block-two {
            display: inline-block;
            position: relative;
            top: 10px;
            width: 150px;
            height: 150px;
            margin: 20px;
        }

        scale-block-two {
            border: 4px solid orange;
        }

    </style>
    <script src="https://hammerjs.github.io/dist/hammer.js"></script>
    <script src="//cdn.rawgit.com/hammerjs/touchemulator/0.0.2/touch-emulator.js"></script>
    <script> TouchEmulator(); </script>
</head>
<body>
<scale-block-two>Callback()</scale-block-two>
<script type="module">
  import {PinchGestureMixin} from '../src/PinchGestureMixin.js'; //test

  function updateQueryStringParam(key, value) {
    let baseUrl = [location.protocol, '//', location.host, location.pathname].join('');
    let urlQueryString = document.location.search;
    let newParam = key + '=' + value,
      params = '?' + newParam;
    // If the "search" string exists, then build params from it
    if (urlQueryString) {
      let keyRegex = new RegExp('([\?&])' + key + '[^&]*');
      // If param exists already, update it
      if (urlQueryString.match(keyRegex) !== null) {
        params = urlQueryString.replace(keyRegex, "$1" + newParam);
      }
    }
    window.history.replaceState({}, "", baseUrl + params);
  }

  class ScaleBlock2 extends PinchGestureMixin(HTMLElement) {

    constructor() {
      super();
      this._pinchStartListener = e => this._onPinchStart(e);
      this._pinchListener = e => this._onPinch(e);
      this._pinchEndListener = e => this._onPinchEnd(e);
      updateQueryStringParam("eventAndOrCallback", -1);
    }

    static get dragFlingEventOrCallback() {
      return -1;
    }

    pinchCallback(pinchDetail) {
      const diagonal = pinchDetail.distDiagonal;
      this.style.transform = `scale(${diagonal})`;
    }
  }

  customElements.define("scale-block-two", ScaleBlock2);

</script>
</body>
</html>
